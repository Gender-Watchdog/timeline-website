<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{ site.baseurl }}/js/timeline.js"></script>
{% if page.layout == 'post' %}
<script src="{{ site.baseurl }}/js/blog_posts.js"></script>
{% endif %}
{% if page.layout == 'timeline' %}
<script src="{{ site.baseurl }}/js/structured-data.js"></script>
<script>
  // Load structured data based on the current page's language or default to index.json
  // Assuming the JSON files are named timeline_LANG.json or index.json
  let jsonFile = 'index.json';
  {% if page.lang and page.lang != 'en' %}
    jsonFile = 'timeline_{{ page.lang | replace: "-", "_" | downcase }}.json';
  {% endif %}
  
  fetch('{{ site.baseurl }}/structured_data/' + jsonFile)
    .then(response => response.json())
    .then(data => {
      const script = document.createElement('script');
      script.type = 'application/ld+json';
      script.text = JSON.stringify(data);
      document.head.appendChild(script);
    })
    .catch(error => {
      console.log('Structured data not loaded:', error);
    });
</script>
{% endif %}
